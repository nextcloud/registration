import{_ as J,d as M,o as a,c as o,r as U,a as f,n as D,u as t,N as Q,b as p,t as g,e as y,i as X,f as L,m as Y,g as ee,h as te,j as ie,k as w,l as B,p as r,q as Z,s as _,w as c,v as k,x as A,y as I,z as b,A as ae,B as le,C as K,D as se,E as ne,F as oe,G as re,H as ue,I as N,J as de,K as ce,L as pe,M as ge,O as me,P as j,Q as V,R as O,S as R}from"./logger-D3RVzcfQ-ffeK4KZC.chunk.mjs";const fe=["role"],he={key:0,class:"notecard__heading"},ve={class:"notecard__text"},_e=M({__name:"NcNoteCard",props:{heading:{default:void 0},showAlert:{type:Boolean},text:{default:void 0},type:{default:"warning"}},setup(i){const l=i,e=L(()=>l.showAlert||l.type==="error"),d=L(()=>{switch(l.type){case"error":return ie;case"success":return te;case"info":return ee;default:return Y}});return(n,m)=>(a(),o("div",{class:D(["notecard",{[`notecard--${n.type}`]:n.type,"notecard--legacy":t(X)}]),role:e.value?"alert":"note"},[U(n.$slots,"icon",{},()=>[f(t(Q),{path:d.value,class:D(["notecard__icon",{"notecard__icon--heading":n.heading}]),inline:""},null,8,["path","class"])],!0),p("div",null,[n.heading?(a(),o("p",he,g(n.heading),1)):y("",!0),U(n.$slots,"default",{},()=>[p("p",ve,g(n.text),1)],!0)])],10,fe))}}),T=J(_e,[["__scopeId","data-v-7e4656f9"]]),ye={name:"EmailIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},be=["aria-hidden","aria-label"],ke=["fill","width","height"],we={d:"M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"},Ce={key:0};function Ve(i,l,e,d,n,m){return a(),o("span",B(i.$attrs,{"aria-hidden":e.title?null:"true","aria-label":e.title,class:"material-design-icon email-icon",role:"img",onClick:l[0]||(l[0]=u=>i.$emit("click",u))}),[(a(),o("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[p("path",we,[e.title?(a(),o("title",Ce,g(e.title),1)):y("",!0)])],8,ke))],16,be)}const W=w(ye,[["render",Ve]]),xe={class:"guest-box"},Be={action:"",method:"post"},ze=["value"],Ae=M({__name:"RegistrationEmail",setup(i){const l=r("registration","emailIsOptional"),e=r("registration","message"),d=Z(),n=r("registration","disableEmailVerification"),m=r("registration","isLoginFlow"),u=r("registration","loginFormLink"),S=L(()=>l?b("registration","Email (optional)"):b("registration","Email")),x=L(()=>l||n?b("registration","Continue"):m?b("registration","Request verification code"):b("registration","Request verification link"));return(z,C)=>(a(),o("div",xe,[p("form",Be,[p("fieldset",null,[t(e)!==""?(a(),_(t(T),{key:0,type:"error"},{default:c(()=>[k(g(t(e)),1)]),_:1})):y("",!0),f(t(A),{name:"email",type:"email",label:S.value,labelVisible:!0,required:"",modelValue:"",autofocus:""},{default:c(()=>[f(W,{size:20})]),_:1},8,["label"]),C[0]||(C[0]=p("div",{id:"terms_of_service"},null,-1)),p("input",{type:"hidden",name:"requesttoken",value:t(d)},null,8,ze),f(t(I),{id:"submit",type:"submit",variant:"primary",wide:!0},{default:c(()=>[k(g(x.value),1)]),_:1}),f(t(I),{variant:"tertiary",href:t(u),wide:!0},{default:c(()=>[k(g(t(b)("registration","Back to login")),1)]),_:1},8,["href"])])])]))}}),Le=w(Ae,[["__scopeId","data-v-5cb426dc"]]);function Se(){try{return r("core","capabilities")}catch{return console.debug("Could not find capabilities initial state fall back to _oc_capabilities"),"_oc_capabilities"in window?window._oc_capabilities:{}}}ae(le);const Pe=M({__name:"NcPasswordField",props:j({class:{},inputClass:{default:""},id:{},label:{},labelOutside:{type:Boolean},placeholder:{},showTrailingButton:{type:Boolean,default:!0},success:{type:Boolean},error:{type:Boolean},helperText:{},disabled:{type:Boolean},pill:{type:Boolean},checkPasswordStrength:{type:Boolean},minlength:{default:void 0},asText:{type:Boolean}},{modelValue:{default:""},modelModifiers:{},visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:j(["valid","invalid"],["update:modelValue","update:visible"]),setup(i,{expose:l,emit:e}){const d=K(i,"modelValue"),n=K(i,"visible"),m=i,u=e;se(d,ne(H,500)),l({focus:$,select:F});const{password_policy:S}=Se(),x=oe("inputField"),z=V(""),C=V(),q=L(()=>{const s={...m};return delete s.checkPasswordStrength,delete s.minlength,delete s.asText,delete s.error,delete s.helperText,delete s.inputClass,delete s.success,s}),P=L(()=>m.minlength??(m.checkPasswordStrength?S?.minLength:void 0)??void 0);async function H(){if(m.checkPasswordStrength)try{const{data:s}=await re.post(ue("apps/password_policy/api/v1/validate"),{password:d.value});if(C.value=s.ocs.data.passed,s.ocs.data.passed){z.value=N("Password is secure"),u("valid");return}z.value=s.ocs.data.reason,u("invalid")}catch(s){de.error("Password policy returned an error",{error:s})}}function E(){n.value=!n.value}function $(s){x.value.focus(s)}function F(){x.value.select()}return(s,h)=>(a(),_(me,B(q.value,{ref:"inputField",modelValue:d.value,"onUpdate:modelValue":h[0]||(h[0]=v=>d.value=v),error:s.error||C.value===!1,helperText:s.helperText||z.value,inputClass:[s.inputClass,{"password-field__input--secure-text":!n.value&&s.asText}],minlength:P.value,success:s.success||C.value===!0,trailingButtonLabel:n.value?t(N)("Hide password"):t(N)("Show password"),type:n.value||s.asText?"text":"password",onTrailingButtonClick:E}),ce({"trailing-button-icon":c(()=>[f(Q,{path:n.value?t(pe):t(ge)},null,8,["path"])]),_:2},[s.$slots.icon?{name:"icon",fn:c(()=>[U(s.$slots,"icon",{},void 0,!0)]),key:"0"}:void 0]),1040,["modelValue","error","helperText","inputClass","minlength","success","trailingButtonLabel","type"]))}}),$e=J(Pe,[["__scopeId","data-v-00e75248"]]),Ie={name:"AccountIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Me=["aria-hidden","aria-label"],qe=["fill","width","height"],He={d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"},Te={key:0};function Ee(i,l,e,d,n,m){return a(),o("span",B(i.$attrs,{"aria-hidden":e.title?null:"true","aria-label":e.title,class:"material-design-icon account-icon",role:"img",onClick:l[0]||(l[0]=u=>i.$emit("click",u))}),[(a(),o("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[p("path",He,[e.title?(a(),o("title",Te,g(e.title),1)):y("",!0)])],8,qe))],16,Me)}const G=w(Ie,[["render",Ee]]),Fe={name:"KeyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ne=["aria-hidden","aria-label"],Ue=["fill","width","height"],Ze={d:"M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z"},Oe={key:0};function Re(i,l,e,d,n,m){return a(),o("span",B(i.$attrs,{"aria-hidden":e.title?null:"true","aria-label":e.title,class:"material-design-icon key-icon",role:"img",onClick:l[0]||(l[0]=u=>i.$emit("click",u))}),[(a(),o("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[p("path",Ze,[e.title?(a(),o("title",Oe,g(e.title),1)):y("",!0)])],8,Ue))],16,Ne)}const De=w(Fe,[["render",Re]]),Ke={name:"LockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},je=["aria-hidden","aria-label"],Ge=["fill","width","height"],Je={d:"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"},Qe={key:0};function We(i,l,e,d,n,m){return a(),o("span",B(i.$attrs,{"aria-hidden":e.title?null:"true","aria-label":e.title,class:"material-design-icon lock-icon",role:"img",onClick:l[0]||(l[0]=u=>i.$emit("click",u))}),[(a(),o("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[p("path",Je,[e.title?(a(),o("title",Qe,g(e.title),1)):y("",!0)])],8,Ge))],16,je)}const Xe=w(Ke,[["render",We]]),Ye={name:"PhoneIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},et=["aria-hidden","aria-label"],tt=["fill","width","height"],it={d:"M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"},at={key:0};function lt(i,l,e,d,n,m){return a(),o("span",B(i.$attrs,{"aria-hidden":e.title?null:"true","aria-label":e.title,class:"material-design-icon phone-icon",role:"img",onClick:l[0]||(l[0]=u=>i.$emit("click",u))}),[(a(),o("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[p("path",it,[e.title?(a(),o("title",at,g(e.title),1)):y("",!0)])],8,tt))],16,et)}const st=w(Ye,[["render",lt]]),nt={class:"guest-box"},ot=["value"],rt={key:1},ut=["value"],dt={key:7,type:"hidden",name:"fullname",value:""},ct={key:9,type:"hidden",name:"phone",value:""},pt=M({__name:"UserDetails",setup(i){const l=V(r("registration","email")),e=r("registration","emailIsLogin"),d=r("registration","emailIsOptional"),n=V(r("registration","loginname")),m=V(r("registration","fullname")),u=r("registration","showFullname"),S=r("registration","enforceFullname"),x=V(r("registration","phone")),z=r("registration","showPhone"),C=r("registration","enforcePhone"),q=r("registration","message"),P=V(r("registration","password")),H=r("registration","additionalHint"),E=Z(),$=V(!1);function F(){$.value=!0}return(s,h)=>(a(),o("div",nt,[p("form",{action:"",method:"post",onSubmit:F},[p("input",{type:"hidden",name:"requesttoken",value:t(E)},null,8,ot),p("fieldset",null,[t(q)!==""?(a(),_(t(T),{key:0,type:"error"},{default:c(()=>[k(g(t(q)),1)]),_:1})):(a(),o("p",rt,g(s.t("registration","Welcome, you can create your account below.")),1)),t(H)?(a(),_(t(T),{key:2,type:"success"},{default:c(()=>[k(g(t(H)),1)]),_:1})):y("",!0),!t(d)||l.value.length>0?(a(),_(t(A),{key:3,modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=v=>l.value=v),type:"email",label:s.t("registration","Email"),labelVisible:!0,name:"email",disabled:""},{default:c(()=>[f(W,{size:20,class:"input__icon"})]),_:1},8,["modelValue","label"])):y("",!0),t(e)?(a(),o("input",{key:5,type:"hidden",name:"loginname",value:l.value},null,8,ut)):(a(),_(t(A),{key:4,modelValue:n.value,"onUpdate:modelValue":h[1]||(h[1]=v=>n.value=v),type:"text",name:"loginname",label:s.t("registration","Login name"),labelVisible:!0,required:""},{default:c(()=>[t(u)?(a(),_(De,{key:0,size:20,class:"input__icon"})):(a(),_(G,{key:1,size:20,class:"input__icon"}))]),_:1},8,["modelValue","label"])),t(u)?(a(),_(t(A),{key:6,modelValue:m.value,"onUpdate:modelValue":h[2]||(h[2]=v=>m.value=v),type:"text",name:"fullname",label:s.t("registration","Full name"),labelVisible:!0,required:t(S)},{default:c(()=>[f(G,{size:20,class:"input__icon"})]),_:1},8,["modelValue","label","required"])):(a(),o("input",dt)),t(z)?(a(),_(t(A),{key:8,modelValue:x.value,"onUpdate:modelValue":h[3]||(h[3]=v=>x.value=v),type:"text",name:"phone",label:s.t("registration","Phone number"),labelVisible:!0,required:t(C)},{default:c(()=>[f(st,{size:20,class:"input__icon"})]),_:1},8,["modelValue","label","required"])):(a(),o("input",ct)),f(t($e),{modelValue:P.value,"onUpdate:modelValue":h[4]||(h[4]=v=>P.value=v),label:s.t("registration","Password"),labelVisible:!0,name:"password",required:""},{default:c(()=>[f(Xe,{size:20,class:"input__icon"})]),_:1},8,["modelValue","label"]),f(t(I),{id:"submit",type:"submit",variant:"primary",wide:!0,disabled:$.value||P.value.length===0},{default:c(()=>[k(g($.value?s.t("registration","Loading"):s.t("registration","Create account")),1)]),_:1},8,["disabled"])])],32)]))}}),gt=w(pt,[["__scopeId","data-v-99b0b40f"]]),mt={name:"ShieldCheckIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ft=["aria-hidden","aria-label"],ht=["fill","width","height"],vt={d:"M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"},_t={key:0};function yt(i,l,e,d,n,m){return a(),o("span",B(i.$attrs,{"aria-hidden":e.title?null:"true","aria-label":e.title,class:"material-design-icon shield-check-icon",role:"img",onClick:l[0]||(l[0]=u=>i.$emit("click",u))}),[(a(),o("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[p("path",vt,[e.title?(a(),o("title",_t,g(e.title),1)):y("",!0)])],8,ht))],16,ft)}const bt=w(mt,[["render",yt]]),kt={class:"guest-box"},wt={action:"",method:"post"},Ct=["value"],Vt=M({__name:"VerificationStep",setup(i){const l=r("registration","message"),e=Z(),d=r("registration","loginFormLink");return(n,m)=>(a(),o("div",kt,[p("form",wt,[p("fieldset",null,[t(l)!==""?(a(),_(t(T),{key:0,type:"error"},{default:c(()=>[k(g(t(l)),1)]),_:1})):y("",!0),f(t(A),{type:"text",name:"token",label:n.t("registration","Verification code"),labelVisible:!0,required:"",modelValue:"",autofocus:""},{default:c(()=>[f(bt,{size:20})]),_:1},8,["label"]),p("input",{type:"hidden",name:"requesttoken",value:t(e)},null,8,Ct),f(t(I),{id:"submit",type:"submit",variant:"primary",wide:!0},{default:c(()=>[k(g(n.t("registration","Verify")),1)]),_:1}),f(t(I),{variant:"tertiary",href:t(d),wide:!0},{default:c(()=>[k(g(n.t("registration","Back to login")),1)]),_:1},8,["href"])])])]))}}),xt=w(Vt,[["__scopeId","data-v-4206f999"]]);if(document.getElementById("registration_email")){const i=O(Le);i.config.globalProperties.t=b,i.config.globalProperties.n=R,i.mount("#registration_email")}if(document.getElementById("registration_verification")){const i=O(xt);i.config.globalProperties.t=b,i.config.globalProperties.n=R,i.mount("#registration_verification")}if(document.getElementById("registration_user")){const i=O(gt);i.config.globalProperties.t=b,i.config.globalProperties.n=R,i.mount("#registration_user")}
//# sourceMappingURL=registration-form.mjs.map
